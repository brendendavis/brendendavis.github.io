<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D&D Character Manager</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>D&D Character Manager</h1>
  </header>
  <main>
    <div class="container">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <nav>
          <ul>
            <li><a href="#SAVE-LOAD">SAVE / LOAD</a></li>
            <li><a href="#character-info">Character Info</a></li>
            <li><a href="#racial-details">Racial Details</a></li>
            <li><a href="#ability-scores">Ability Scores</a></li>
            <li><a href="#inspiration">Inspiration &amp; Proficiency</a></li>
            <li><a href="#saving-throws">Saving Throws</a></li>
            <li><a href="#dice-roller">Dice Roller</a></li>
            <li><a href="#skills">Skills</a></li>
            <li><a href="#other-proficiencies">Other Proficiencies</a></li>
            <li><a href="#combat-stats">Combat Stats</a></li>
            <li><a href="#attacks-spellcasting">Attacks &amp; Spellcasting</a></li>
            <li><a href="#spellcasting-details">Spellcasting Details</a></li>
            <li><a href="#spell-management">Spell Management</a></li>
            <li><a href="#equipment">Equipment</a></li>
            <li><a href="#features-traits">Features &amp; Traits</a></li>
            <li><a href="#personality-backstory">Personality &amp; Backstory</a></li>
          </ul>
        </nav>
      </aside>
      <!-- Main Content Wrapper -->

      <div class="main-content">
        <div class="character-management" id="SAVE-LOAD">
          <button onclick="saveCharacter()">Save Character</button>
          <select id="loadCharacterSelect" onchange="loadCharacter(this.value)">
            <option value="">-- Load Character --</option>
          </select>
          <button onclick="populateCharacterList()">Refresh Character List</button>
        </div>
       <form id="characterForm"> 
        <section id="character-info">
          <fieldset>
            <legend>Character Info</legend>
            <label for="characterName">Name:</label>
            <input type="text" id="characterName">
            <label for="playerName">Player Name:</label>
            <input type="text" id="playerName">
            <label for="characterClass">Class:</label>
            <select id="characterClass" onchange="updateClass()">
              <option value="">-- Select Class --</option>
              <option value="Barbarian">Barbarian</option>
              <option value="Bard">Bard</option>
              <option value="Cleric">Cleric</option>
              <option value="Druid">Druid</option>
              <option value="Fighter">Fighter</option>
              <option value="Monk">Monk</option>
              <option value="Paladin">Paladin</option>
              <option value="Ranger">Ranger</option>
              <option value="Rogue">Rogue</option>
              <option value="Sorcerer">Sorcerer</option>
              <option value="Warlock">Warlock</option>
              <option value="Wizard">Wizard</option>
            </select>
            <label for="level">Level:</label>
            <input type="number" id="level" value="1" min="1">
            <label for="race">Race:</label>
            <select id="race" onchange="updateRace()">
              <option value="Dragonborn">Dragonborn</option>
              <option value="Drow">Drow</option>
              <option value="Dwarf">Dwarf</option>
              <option value="Duergar">Duergar</option>
              <option value="Elf">Elf</option>
              <option value="Eladrin">Eladrin</option>
              <option value="Gnome">Gnome</option>
              <option value="Svirfneblin">Svirfneblin</option>
              <option value="Half-Elf">Half-Elf</option>
              <option value="Half-Orc">Half-Orc</option>
              <option value="Halfling">Halfling</option>
              <option value="Ghostwise Halfling">Ghostwise Halfling</option>
              <option value="Human">Human</option>
              <option value="Tiefling">Tiefling</option>
              <option value="Tiefling (Feral)">Tiefling (Feral)</option>
              <option value="Aasimar">Aasimar</option>
              <option value="Firbolg">Firbolg</option>
              <option value="Goliath">Goliath</option>
              <option value="Kenku">Kenku</option>
              <option value="Lizardfolk">Lizardfolk</option>
              <option value="Tabaxi">Tabaxi</option>
              <option value="Triton">Triton</option>
              <option value="Bugbear">Bugbear</option>
              <option value="Goblin">Goblin</option>
              <option value="Hobgoblin">Hobgoblin</option>
              <option value="Kobold">Kobold</option>
              <option value="Orc">Orc</option>
              <option value="Yuan-Ti Pureblood">Yuan-Ti Pureblood</option>
              <option value="Githyanki">Githyanki</option>
              <option value="Githzerai">Githzerai</option>
              <option value="Changeling">Changeling</option>
              <option value="Kalashtar">Kalashtar</option>
              <option value="Shifter">Shifter</option>
              <option value="Warforged">Warforged</option>
              <option value="Centaur">Centaur</option>
              <option value="Loxodon">Loxodon</option>
              <option value="Minotaur">Minotaur</option>
              <option value="Simic Hybrid">Simic Hybrid</option>
              <option value="Vedalken">Vedalken</option>
              <option value="Leonin">Leonin</option>
              <option value="Satyr">Satyr</option>
              <option value="Tortle">Tortle</option>
              <option value="Verdan">Verdan</option>
            </select>
            <label for="alignment">Alignment:</label>
            <input type="text" id="alignment">
            <label for="background">Background:</label>
            <input type="text" id="background">
            <label for="experience">Experience Points (XP):</label>
            <input type="number" id="experience" value="0" min="0">
          </fieldset>
        </section>
        
        <section id="racial-details">
          <fieldset>
            <legend>Racial Details</legend>
            <div>
              <label for="subraceSelect" id="subraceLabel" style="display:none;">Subrace:</label>
              <select id="subraceSelect" style="display:none;" onchange="updateRace()"></select>
            </div>
            <div>
              <strong>Ability Score Bonuses:</strong>
              <span id="racialAbilityBonuses"></span>
            </div>
            <div>
              <strong>Speed:</strong>
              <span id="racialSpeed"></span>
            </div>
            <div>
              <strong>Languages:</strong>
              <span id="racialLanguages"></span>
            </div>
            <div>
              <strong>Traits:</strong>
              <span id="racialTraits"></span>
            </div>
            <div>
              <strong>Proficiencies:</strong>
              <span id="racialProficiencies"></span>
            </div>
          </fieldset>
        </section>
        
        <section id="ability-scores">
          <fieldset>
            <legend>Ability Scores (Standard Array by Default)</legend>
            <label for="scoreMethod">Score Generation Method:</label>
            <select id="scoreMethod">
              <option value="Standard Array">Standard Array</option>
              <option value="Point Buy">Point Buy</option>
              <option value="Roll Dice">Roll Dice</option>
            </select>
            <button id="rollDiceButton">Roll Abilities</button>
            <div id="remainingPointsDisplay">Remaining Points: <span id="remainingPoints">27</span></div>
            
            <table>
              <tr>
                <th>Ability</th>
                <th>Base Score</th>
                <th>Racial Bonus</th>
                <th>Total Modifier</th>
              </tr>
              <tr>
                <td><label for="str">Strength (STR)</label></td>
                <td>
                  <input type="number" id="str" value="15" min="1" 
                         onchange="recalc(); updatePointBuyRemaining()" 
                         oninput="recalc(); updatePointBuyRemaining()">
                </td>
                <td><input type="text" id="strBonus" readonly></td>
                <td><input type="text" id="strMod" readonly></td>
              </tr>
              <tr>
                <td><label for="dex">Dexterity (DEX)</label></td>
                <td>
                  <input type="number" id="dex" value="14" min="1" 
                         onchange="recalc(); updatePointBuyRemaining()" 
                         oninput="recalc(); updatePointBuyRemaining()">
                </td>
                <td><input type="text" id="dexBonus" readonly></td>
                <td><input type="text" id="dexMod" readonly></td>
              </tr>
              <tr>
                <td><label for="con">Constitution (CON)</label></td>
                <td>
                  <input type="number" id="con" value="13" min="1" 
                         onchange="recalc(); updatePointBuyRemaining()" 
                         oninput="recalc(); updatePointBuyRemaining()">
                </td>
                <td><input type="text" id="conBonus" readonly></td>
                <td><input type="text" id="conMod" readonly></td>
              </tr>
              <tr>
                <td><label for="int">Intelligence (INT)</label></td>
                <td>
                  <input type="number" id="int" value="12" min="1" 
                         onchange="recalc(); updatePointBuyRemaining()" 
                         oninput="recalc(); updatePointBuyRemaining()">
                </td>
                <td><input type="text" id="intBonus" readonly></td>
                <td><input type="text" id="intMod" readonly></td>
              </tr>
              <tr>
                <td><label for="wis">Wisdom (WIS)</label></td>
                <td>
                  <input type="number" id="wis" value="10" min="1" 
                         onchange="recalc(); updatePointBuyRemaining()" 
                         oninput="recalc(); updatePointBuyRemaining()">
                </td>
                <td><input type="text" id="wisBonus" readonly></td>
                <td><input type="text" id="wisMod" readonly></td>
              </tr>
              <tr>
                <td><label for="cha">Charisma (CHA)</label></td>
                <td>
                  <input type="number" id="cha" value="8" min="1" 
                         onchange="recalc(); updatePointBuyRemaining()" 
                         oninput="recalc(); updatePointBuyRemaining()">
                </td>
                <td><input type="text" id="chaBonus" readonly></td>
                <td><input type="text" id="chaMod" readonly></td>
              </tr>
            </table>
          </fieldset>
        </section>
        
        <!-- Inspiration & Proficiency Section -->
        <section id="inspiration">
          <fieldset>
            <legend>Inspiration &amp; Proficiency</legend>
            <label for="proficiencyBonus">Proficiency Bonus:</label>
            <input type="number" id="proficiencyBonus" value="2" min="0">
          </fieldset>
        </section>
        <!-- Saving Throws Section -->
<section id="saving-throws">
  <fieldset>
    <legend>Saving Throws</legend>
    <table>
      <tr>
        <th>Ability</th>
        <th>Proficient?</th>
        <th>Modifier</th>
      </tr>
      <tr>
        <td>Strength (STR)</td>
        <td><input type="checkbox" id="strSaveProf" onchange="recalc()"></td>
        <td><input type="text" id="strSave" readonly></td>
      </tr>
      <tr>
        <td>Dexterity (DEX)</td>
        <td><input type="checkbox" id="dexSaveProf" onchange="recalc()"></td>
        <td><input type="text" id="dexSave" readonly></td>
      </tr>
      <tr>
        <td>Constitution (CON)</td>
        <td><input type="checkbox" id="conSaveProf" onchange="recalc()"></td>
        <td><input type="text" id="conSave" readonly></td>
      </tr>
      <tr>
        <td>Intelligence (INT)</td>
        <td><input type="checkbox" id="intSaveProf" onchange="recalc()"></td>
        <td><input type="text" id="intSave" readonly></td>
      </tr>
      <tr>
        <td>Wisdom (WIS)</td>
        <td><input type="checkbox" id="wisSaveProf" onchange="recalc()"></td>
        <td><input type="text" id="wisSave" readonly></td>
      </tr>
      <tr>
        <td>Charisma (CHA)</td>
        <td><input type="checkbox" id="chaSaveProf" onchange="recalc()"></td>
        <td><input type="text" id="chaSave" readonly></td>
      </tr>
    </table>
  </fieldset>
</section>
        <section id="dice-roller">
          <fieldset>
            <legend>Dice Roller</legend>
            <input type="text" id="diceFormula" placeholder="e.g., 2d20+1d6">
            <button onclick="rollDice(event)">Roll Dice</button>
            <div id="diceResults"></div>
          </fieldset>
        </section>
        
        <section id="skills">
          <fieldset>
            <legend>Skills</legend>
            <table>
              <tr>
                <th>Skill</th>
                <th>Proficient?</th>
                <th>Modifier</th>
              </tr>
              <tr>
                <td>Acrobatics (DEX)</td>
                <td><input type="checkbox" id="acrobaticsProf" onchange="recalc()"></td>
                <td><input type="text" id="acrobatics" readonly></td>
              </tr>
              <tr>
                <td>Animal Handling (WIS)</td>
                <td><input type="checkbox" id="animalHandlingProf" onchange="recalc()"></td>
                <td><input type="text" id="animalHandling" readonly></td>
              </tr>
              <tr>
                <td>Arcana (INT)</td>
                <td><input type="checkbox" id="arcanaProf" onchange="recalc()"></td>
                <td><input type="text" id="arcana" readonly></td>
              </tr>
              <tr>
                <td>Athletics (STR)</td>
                <td><input type="checkbox" id="athleticsProf" onchange="recalc()"></td>
                <td><input type="text" id="athletics" readonly></td>
              </tr>
              <tr>
                <td>Deception (CHA)</td>
                <td><input type="checkbox" id="deceptionProf" onchange="recalc()"></td>
                <td><input type="text" id="deception" readonly></td>
              </tr>
              <tr>
                <td>History (INT)</td>
                <td><input type="checkbox" id="historyProf" onchange="recalc()"></td>
                <td><input type="text" id="history" readonly></td>
              </tr>
              <tr>
                <td>Insight (WIS)</td>
                <td><input type="checkbox" id="insightProf" onchange="recalc()"></td>
                <td><input type="text" id="insight" readonly></td>
              </tr>
              <tr>
                <td>Intimidation (CHA)</td>
                <td><input type="checkbox" id="intimidationProf" onchange="recalc()"></td>
                <td><input type="text" id="intimidation" readonly></td>
              </tr>
              <tr>
                <td>Investigation (INT)</td>
                <td><input type="checkbox" id="investigationProf" onchange="recalc()"></td>
                <td><input type="text" id="investigation" readonly></td>
              </tr>
              <tr>
                <td>Medicine (WIS)</td>
                <td><input type="checkbox" id="medicineProf" onchange="recalc()"></td>
                <td><input type="text" id="medicine" readonly></td>
              </tr>
              <tr>
                <td>Nature (INT)</td>
                <td><input type="checkbox" id="natureProf" onchange="recalc()"></td>
                <td><input type="text" id="nature" readonly></td>
              </tr>
              <tr>
                <td>Perception (WIS)</td>
                <td><input type="checkbox" id="perceptionProf" onchange="recalc()"></td>
                <td><input type="text" id="perception" readonly></td>
              </tr>
              <tr>
                <td>Performance (CHA)</td>
                <td><input type="checkbox" id="performanceProf" onchange="recalc()"></td>
                <td><input type="text" id="performance" readonly></td>
              </tr>
              <tr>
                <td>Persuasion (CHA)</td>
                <td><input type="checkbox" id="persuasionProf" onchange="recalc()"></td>
                <td><input type="text" id="persuasion" readonly></td>
              </tr>
              <tr>
                <td>Religion (INT)</td>
                <td><input type="checkbox" id="religionProf" onchange="recalc()"></td>
                <td><input type="text" id="religion" readonly></td>
              </tr>
              <tr>
                <td>Sleight of Hand (DEX)</td>
                <td><input type="checkbox" id="sleightOfHandProf" onchange="recalc()"></td>
                <td><input type="text" id="sleightOfHand" readonly></td>
              </tr>
              <tr>
                <td>Stealth (DEX)</td>
                <td><input type="checkbox" id="stealthProf" onchange="recalc()"></td>
                <td><input type="text" id="stealth" readonly></td>
              </tr>
              <tr>
                <td>Survival (WIS)</td>
                <td><input type="checkbox" id="survivalProf" onchange="recalc()"></td>
                <td><input type="text" id="survival" readonly></td>
              </tr>
            </table>
            <label for="passivePerception">Passive Perception (10 + Perception):</label>
            <input type="text" id="passivePerception" readonly>
          </fieldset>
        </section>
        
        <section id="other-proficiencies">
          <fieldset>
            <legend>Other Proficiencies &amp; Languages</legend>
            <textarea id="otherProficiencies" placeholder="List tools, languages, etc."></textarea>
          </fieldset>
        </section>
        
        <section id="combat-stats">
          <fieldset>
            <legend>Combat Stats</legend>
            <label for="armorClass">Armor Class (AC):</label>
            <input type="number" id="armorClass">
            <label for="initiative">Initiative:</label>
            <input type="text" id="initiative" readonly>
            <label for="speed">Speed (ft):</label>
            <input type="number" id="speed" value="30">
            <label for="hitPoints">Hit Points (HP):</label>
            <input type="number" id="hitPoints">
            <label for="hitDice">Hit Dice:</label>
            <input type="text" id="hitDice" placeholder="e.g., 1d10">
            <div>
              <strong>Death Saves:</strong>
              <div>
                <span>Successes:</span>
                <input type="checkbox" id="deathSaveSuccess1">
                <input type="checkbox" id="deathSaveSuccess2">
                <input type="checkbox" id="deathSaveSuccess3">
              </div>
              <div>
                <span>Failures:</span>
                <input type="checkbox" id="deathSaveFailure1">
                <input type="checkbox" id="deathSaveFailure2">
                <input type="checkbox" id="deathSaveFailure3">
              </div>
            </div>
          </fieldset>
        </section>
        
        <section id="attacks-spellcasting">
          <fieldset>
            <legend>Attacks &amp; Spellcasting</legend>
            <div>
              <strong>Weapons:</strong>
              <datalist id="weaponsList">
                <!-- Options will be populated by JavaScript -->
              </datalist>
              <table id="weaponsTable">
                <tr>
                  <th>Weapon</th>
                  <th>Attack Bonus</th>
                  <th>Damage</th>
                  <th>Action</th>
                </tr>
              </table>
              <button type="button" onclick="addWeaponRow()">Add Weapon</button>
            </div>
            <div>
              <label for="spellcastingAbility">Spellcasting Ability:</label>
              <select id="spellcastingAbility" onchange="recalc()">
                <option value="int">Intelligence (INT)</option>
                <option value="wis">Wisdom (WIS)</option>
                <option value="cha">Charisma (CHA)</option>
              </select>
              <label for="spellSaveDC">Spell Save DC:</label>
              <input type="text" id="spellSaveDC" readonly>
              <label for="spellAttackBonus">Spell Attack Bonus:</label>
              <input type="text" id="spellAttackBonus" readonly>
            </div>
          </fieldset>
        </section>
        
        <section id="spellcasting-details">
          <fieldset>
            <legend>Spellcasting Details</legend>
            <label>Spell Slots:</label>
            <div id="spellSlotsContainer">
              <!-- Dynamic slots will appear here -->
            </div>
          </fieldset>
        </section>
        
        <section id="spell-management" class="spell-management-container">
          <fieldset class="spell-management-fieldset">
            <legend>Spell Management</legend>
            <div class="search-container">
              <input type="text" id="spellSearchInput" placeholder="Search spells by name or description..." class="spell-search-input">
              <button type="button" id="searchSpellsButton" class="search-button">Search</button>
            </div>
            <div id="spellSearchResults" class="spell-search-results"></div>
            <div class="spell-lists-container">
              <div class="spell-list-section">
                <h4>Known Spells</h4>
                <ul id="knownSpellsList" class="spells-list"></ul>
              </div>
              <div class="spell-list-section">
                <h4>Prepared Spells</h4>
                <ul id="preparedSpellsList" class="spells-list"></ul>
              </div>
            </div>
            <div class="spells-accordion">
              <button class="accordion-button">All Spells</button>
              <div class="accordion-content" style="display: none;">
                <section id="spell-section">
                  <div id="spell-list">
                    <p>Loading spells...</p>
                  </div>
                </section>
              </div>
            </div>
          </fieldset>
        </section>
        
        <section id="equipment">
          <fieldset>
            <legend>Equipment</legend>
            <textarea id="equipment" placeholder="List equipment, items, etc."></textarea>
          </fieldset>
        </section>
        
        <section id="features-traits">
          <fieldset>
            <legend>Features &amp; Traits</legend>
            <textarea id="featuresTraits" placeholder="List features, racial traits, class features, feats, etc."></textarea>
          </fieldset>
        </section>
        
        <section id="personality-backstory">
          <fieldset>
            <legend>Personality &amp; Backstory</legend>
            <label for="personalityTraits">Personality Traits, Ideals, Bonds, Flaws:</label>
            <textarea id="personalityTraits" placeholder="Describe personality traits"></textarea>
            <label for="backstory">Backstory & Allies/Organizations:</label>
            <textarea id="backstory" placeholder="Describe your character's history and connections"></textarea>
          </fieldset>
        </section>
      </div>
    </div>
  </form>
  </main>
  
  <script>
    // Accordion for spell management
    const acc = document.getElementsByClassName("accordion-button");
    for (let i = 0; i < acc.length; i++) {
      acc[i].addEventListener("click", function() {
        this.classList.toggle("active");
        const panel = this.nextElementSibling;
        panel.style.display = (panel.style.display === "block") ? "none" : "block";
      });
    }
  </script>
  <datalist id="weaponsList">
    <!-- Options will be populated by JavaScript -->
  </datalist>
  <div>
    <!-- Additional buttons for save/load character can be added here if desired -->
  </div>
  <script src="script.js"></script>

  <script src="spellManagement.js"></script>
  <script src="charsaves.js"></script>
</body>
</html>
